@inject NavigationManager NavigationManager
@inherits ErrorBoundary


<CascadingValue Value="this" IsFixed="true">
    @if (CurrentException is null)
    {
        @ChildContent
    }
    else if (ErrorContent is not null)
    {
        @ErrorContent(CurrentException)
    }
</CascadingValue>

@code {

    private string? _ErrorPath = null;

    protected override Task OnErrorAsync(Exception exception)
    {
        _ErrorPath = NavigationManager.Uri;

        return base.OnErrorAsync(exception);
    }
    protected override void OnParametersSet()
    {
        // recover from error on navigation
        if (CurrentException is not null && _ErrorPath != NavigationManager.Uri)
        {
            _ErrorPath = null;
            Recover();
        }
        base.OnParametersSet();
    }
}